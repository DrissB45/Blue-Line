{% extends 'layout.html.twig' %}
{% block stylesheets %}
	{{ parent() }}
	{{ encore_entry_link_tags('lesson') }}
{% endblock %}
{% set title = 'Leçons' %}
{% set return_path = path('tutorial_index') %}


{% block title %}Leçons
{% endblock %}

{% block body %}
	<p class="titleTuto text-center fs-1 fw-bold">{{ tutorial.title }}</p>
	<div class="container-fluid">
		<div class="progress">
			<p class="progress-text fs-3">Progression</p>
			{% if tutorial.lessons|length > 0 %}
				<div class="progress-circle">
					<svg viewbox="0 0 36 36">
						<path class="bg-path" d="M 18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
						<path class="bar-path" style="stroke-dasharray: {{ (app.user.lessons|filter(lesson => lesson.tutorial == tutorial)|length / tutorial.lessons|length)*100 }} 100;" d="M 18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
					</svg>
					<span class="percentage">{{ (app.user.lessons|filter(lesson => lesson.tutorial == tutorial)|length / tutorial.lessons|length)*100|round }}%</span>
				</div>
			{% endif %}
		</div>
	</div>


	<div class="bodyContainer container-fluid">
		<div>
			<div class="lessonSpace cards-container">
				{% for lesson in lessons %}
					<div class="alignCard card justify-content-center col-5 col-lg-4">
						<a class="lesson" href="{{ path('lesson_show', { id: lesson.id }) }}">
							<h2 class="descript fs-4">{{ lesson.title }}</h2>
						</a>
					</div>
				{% endfor %}
			</div>
		</div>
	{% endblock %}
